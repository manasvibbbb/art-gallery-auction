{% extends "base.html" %}
{% block title %}Live Auctions{% endblock %}
{% block content %}

<h1>ðŸ”¨ Live Auctions</h1>

{% if auctions %}
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
        {% for auction in auctions %}
        <div style="border: 2px solid #667eea; padding: 15px; border-radius: 8px; background-color: #f9f9f9;">
            <h2>{{ auction.artwork.title }}</h2>
            {% if auction.artwork.image %}
                <img src="{{ auction.artwork.image.url }}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px; margin-bottom: 10px;">
            {% endif %}
            <p><strong>Starting Bid:</strong> ${{ auction.starting_bid }}</p>
            <p><strong>Current Bid:</strong> <span style="color: #28a745; font-size: 18px; font-weight: bold;">${{ auction.current_bid }}</span></p>
            <p><strong>Ends:</strong> {{ auction.end_time|date:"M d, Y H:i" }}</p>

            <!-- Recent Bids Section -->
            <div style="background-color: white; padding: 10px; border-radius: 4px; margin-top: 10px; border: 1px solid #ddd;">
                <strong>ðŸ’° Recent Bids:</strong>
                {% if auction.bids.all %}
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        {% for bid in auction.bids.all|slice:":5" %}
                            <li>{{ bid.bidder.username }} - <span style="color: #28a745; font-weight: bold;">${{ bid.bid_amount }}</span></li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="margin: 5px 0; color: #999;">No bids yet</p>
                {% endif %}
            </div>

            <a href="{% url 'auction_detail' auction.pk %}" style="background-color: #667eea; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin-top: 10px;">View & Bid</a>
        </div>
        {% endfor %}
    </div>
{% else %}
    <p>No active auctions at the moment.</p>
{% endif %}

{% endblock %}
